# ============================================
# Certificate Expiry Monitor - Configuration
# ============================================
# 
# Copy this file to .env and fill with your actual values
# NEVER commit .env to Git!
#
# Usage:
#   cp .env.example .env
#   nano .env  # or notepad .env on Windows
#

# ============================================
# SMTP Configuration (Email Alerts)
# ============================================

# SMTP Server Settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=True
SMTP_USE_SSL=False

# SMTP Authentication
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Note: For Gmail, use "App Password" not your regular password
# Generate at: https://myaccount.google.com/apppasswords

# Email Addresses
ALERT_EMAIL_FROM=cert-monitor@company.com
ALERT_EMAIL_TO=admin@company.com,security-team@company.com
# Multiple recipients separated by comma

# Email Settings
EMAIL_SUBJECT_PREFIX=[Certificate Alert]
EMAIL_INCLUDE_LOGO=True
EMAIL_LOGO_URL=https://company.com/logo.png


# ============================================
# Slack Integration
# ============================================

SLACK_ENABLED=True
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#alerts
SLACK_USERNAME=Certificate Monitor
SLACK_ICON_EMOJI=:lock:

# Mention users/channels on critical alerts
SLACK_MENTION_ON_CRITICAL=@here
# Options: @here, @channel, @username


# ============================================
# Microsoft Teams Integration
# ============================================

TEAMS_ENABLED=False
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR_WEBHOOK_URL


# ============================================
# Alert Thresholds (days before expiry)
# ============================================

# When to send WARNING alert
ALERT_WARNING_DAYS=30

# When to send CRITICAL alert
ALERT_CRITICAL_DAYS=7

# When to send URGENT alert (last chance)
ALERT_URGENT_DAYS=3

# Check interval (hours)
CHECK_INTERVAL_HOURS=24

# Maximum alerts per certificate (prevent spam)
MAX_ALERTS_PER_CERT=3


# ============================================
# Monitoring Settings
# ============================================

# Concurrent connections (how many checks at once)
CONCURRENT_CHECKS=10

# Connection timeout (seconds)
CONNECTION_TIMEOUT=10

# Retry attempts on failure
RETRY_ATTEMPTS=3

# Retry delay (seconds)
RETRY_DELAY=5


# ============================================
# Certificate Validation
# ============================================

# Verify certificate chain
VERIFY_CHAIN=True

# Check certificate revocation (CRL/OCSP)
CHECK_REVOCATION=True

# Accept self-signed certificates
ALLOW_SELF_SIGNED=True

# Minimum TLS version
MIN_TLS_VERSION=1.2
# Options: 1.0, 1.1, 1.2, 1.3


# ============================================
# Reporting
# ============================================

# Enable daily report
DAILY_REPORT_ENABLED=True

# Daily report time (24h format)
DAILY_REPORT_TIME=09:00

# Report formats (comma separated)
REPORT_FORMATS=html,csv,json
# Options: html, csv, json, pdf

# Keep reports for (days)
REPORT_RETENTION_DAYS=90


# ============================================
# Logging
# ============================================

# Log level
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# Log file path (relative to project root)
LOG_FILE=output/logs/monitor.log

# Log rotation
LOG_MAX_SIZE_MB=10
LOG_BACKUP_COUNT=5

# Log to console
LOG_TO_CONSOLE=True


# ============================================
# Database (optional - for alert history)
# ============================================

# If you want to store alert history in database
DATABASE_ENABLED=False
DATABASE_TYPE=sqlite
# Options: sqlite, postgresql, mysql

# SQLite
DATABASE_PATH=output/database/alerts.db

# PostgreSQL/MySQL (if DATABASE_TYPE is not sqlite)
# DATABASE_HOST=localhost
# DATABASE_PORT=5432
# DATABASE_NAME=cert_monitor
# DATABASE_USER=admin
# DATABASE_PASSWORD=your-password


# ============================================
# Advanced Settings
# ============================================

# User-Agent for HTTP requests
USER_AGENT=CertificateExpiryMonitor/1.0

# Enable debug mode (verbose output)
DEBUG_MODE=False

# Dry run mode (no alerts sent, only logging)
DRY_RUN=False

# Quiet mode (minimal output)
QUIET_MODE=False


# ============================================
# Auto-Renewal Integration (optional)
# ============================================

# Enable automatic certificate renewal
AUTO_RENEWAL_ENABLED=False

# Renewal method
RENEWAL_METHOD=certbot
# Options: certbot, acme.sh, custom

# Renewal threshold (days before expiry to trigger renewal)
RENEWAL_THRESHOLD_DAYS=30

# Certbot path (if using certbot)
CERTBOT_PATH=/usr/bin/certbot


# ============================================
# Webhooks (optional - for custom integrations)
# ============================================

# Generic webhook URL (POST JSON on alert)
WEBHOOK_ENABLED=False
WEBHOOK_URL=https://your-api.com/webhook
WEBHOOK_AUTH_TOKEN=your-secret-token


# ============================================
# Prometheus Metrics (optional)
# ============================================

# Enable Prometheus metrics export
PROMETHEUS_ENABLED=False
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics


# ============================================
# Notes
# ============================================
#
# 1. For Gmail SMTP:
#    - Enable "Less secure app access" OR use "App Password"
#    - Generate App Password: https://myaccount.google.com/apppasswords
#
# 2. For Slack webhook:
#    - Create webhook at: https://api.slack.com/messaging/webhooks
#
# 3. For Teams webhook:
#    - Create incoming webhook in Teams channel settings
#
# 4. Security:
#    - NEVER commit this file with real credentials!
#    - Add .env to .gitignore
#    - Use environment-specific .env files (.env.prod, .env.dev)
#
# 5. Testing:
#    - Set DRY_RUN=True to test without sending alerts
#    - Set DEBUG_MODE=True for verbose logging
#
