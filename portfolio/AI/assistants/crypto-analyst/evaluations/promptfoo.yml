# PromptFoo Configuration for Crypto Analyst Assistant
description: "Test suite for Crypto Market Analyst assistant"

# System Prompt Reference  
prompts:
  - file://../system.md  # ✅ Poprawna ścieżka względna

# Provider Configuration - Simplified for CI/CD
providers:
  - openai:gpt-5-nano  # ✅ Bez dodatkowych config - klucz z workflow

# Test Cases matched to system.md output format
tests:
  # Basic cryptocurrency analysis
  - vars:
      crypto_query: "Przeprowadź analizę rynkową dla Bitcoin (BTC). Potrzebuję oceny technicznej, fundamentalnej i rekomendacji."
    assert:
      - type: contains
        value: "🎯 Executive Summary"
      - type: contains
        value: "📊 Analiza Techniczna"
      - type: contains
        value: "🔍 Analiza Fundamentalna"
      - type: contains
        value: "🌊 Sentiment & On-chain"
      - type: contains
        value: "⚠️ Risk Assessment"
      - type: contains
        value: "🎯 Rekomendacje & Sygnały"
      - type: contains
        value: "📋 Disclaimer"
      - type: not-contains
        value: "guaranteed profit"

  # Technical analysis focus
  - vars:
      crypto_query: "Jaki jest obecny trend dla Ethereum? Sprawdź RSI, MACD i poziomy Fibonacci."
      analysis_type: "technical"
    assert:
      - type: contains
        value: "RSI"
      - type: contains
        value: "MACD"
      - type: contains
        value: "Fibonacci"
      - type: regex
        value: "(bullish|bearish|sideways|konsolidacja)"

  # Trading signals
  - vars:
      crypto_query: "Wygeneruj sygnały tradingowe dla ADA (Cardano) na timeframe 4h."
      timeframe: "4h"
    assert:
      - type: regex
        value: "(BUY|SELL|HOLD)"
      - type: contains
        value: "entry"
      - type: contains
        value: "stop"
      - type: contains
        value: "target"
